apiVersion: v1
kind: Service
metadata:
  name: nginx-dashboard
  namespace: nginx-ingress
spec:
  ports:
  - name: dash
    port: 9000
    protocol: TCP
    targetPort: 9000
  - name: svcinsight
    port: 9114
    protocol: TCP
    targetPort: 9114    
  selector:
    app.kubernetes.io/instance: nginx-plus-ingress
    app.kubernetes.io/name: nginx-ingress
  sessionAffinity: None

---
apiVersion: k8s.nginx.org/v1
kind: VirtualServer
metadata:
  name: nginx-dashboard
  namespace: nginx-ingress
spec:
  host: nginx.f5demo.com
  upstreams:
    - name: nginx-dashboard
      service: nginx-dashboard
      port: 9000
    - name: nginx-svcinsights
      service: nginx-dashboard
      port: 9114
  routes:
    - path: /
      action:
        pass: nginx-dashboard
    - path: /probe
      action:
        pass: nginx-svcinsights